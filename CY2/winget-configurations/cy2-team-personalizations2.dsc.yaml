properties:
  configurationVersion: 0.2.0
  ########################################
  ### RESOURCES: System Configuration
  ########################################
  resources:
  ########################################
  ### Install Tools
  #########################################
  ### Powershell Config  
  ########################################
  ### Run powershell cleanup script
  ### -------------------------------------
    - resource: PSDscResources/Script
      id: runcleanup
      directives:
        description: Runs cleanup script
      settings:
        SetScript: |
          $env:Path = [System.Environment]::GetEnvironmentVariable("Path","Machine") + ";" + [System.Environment]::GetEnvironmentVariable("Path","User")
          New-Item -Path "C:\temp" -ItemType Directory -Force
          Invoke-WebRequest -Uri "https://github.com/microsoft/WSL/releases/download/2.3.24/wsl.2.3.24.0.arm64.msi" -OutFile "C:\temp\wsl.2.3.24.0.arm64.msi"
          Start-Process msiexec.exe -ArgumentList "/i C:\temp\wsl.2.3.24.0.arm64.msi /quiet /norestart" -Wait
          Remove-Item -Path "C:\src\devcenter-catalog\" -Recurse -Force
          $username = $env:USERNAME
          Remove-LocalGroupMember -Group "Administrators" -Member $username
          shutdown /r /f
        GetScript: return $false
        TestScript: return $false

